## 3장 - 액션, 계산, 데이터의 차이를 알기

### 3-1. 액션과 계산, 데이터

함수형 프로그래밍에서는 **액션**, **계산** 그리고 **데이터**를 구분하는 것부터 시작한다. 그리고 액션보단 계산, 계산보단 데이터로 작성하는 것이 유리하다고 주장한다.

- **데이터
  이벤트에 대한 사실**이다. 어색한 번역과 학문 용어의 혼합체로 처음에는 와닿지 않았으나, 책을 읽으며 쉽게 재해석 해보자면 **이벤트(DB 조회, 네트워크 요청 등)로 얻게 된 변하지 않는 정보**인 것 같다. **다양한 자료형**으로 표현할 수 있고, **불변성**을 유지하여 사용한다.(추후에 다룰 예정) **직렬화, 동일성 비교, 자유로운 해석**이라는 장점이 있지만 해석없이는 그저 바이트 덩어리일 뿐이라는 단점이 있다고 주장한다.
- **계산
  입력값으로 출력값을 만드는 것**이다. 다른 말로 **순수 함수**, 수학 함수라고 일컫는다. **함수**로 표현할 수 있다. **테스트하기에 용이**하고, **기계적인 분석(정적 분석)**, **조합하여 사용**하기에 유리하며, **동시성**을 신경쓰지 않아도 된다. 단점으로는 함수는 **블랙 박스**이기에 실행 전에는 **어떤 일이 발생할지 알 수가 없다.**
- **액션
  실행 시점과 횟수에 의존적**이다. 다른 말로 **부수 효과**, **부수 효과가 있는 함수**, **순수하지 않은 함수**라고 일컫는다. 액션은 **다루기 힘들지만,** **소프트웨어를 실행하는 핵심적인 이유**이다. 그러므로 **액션을 잘 사용하기 위한 방안을 모색**해야 한다. 이는 책이 제시하는 **실용적이고 합리적인 주장**이라고 생각한다. 책에서는 액션을 **최대한 적게, 작게 사용**하고 내부에는 계산/데이터로 이뤄지고 가장 외부에 액션을 배치하는 **어니언 아키텍처**와 **호출 시점에 최대한 의존하지 않는 방식**을 제안한다.

위에서 설명한 세 가지 개념을 인지하고 있다면 **여러 상황에서 적용**할 수 있다고 한다.

- **문제에 대해 생각할 때 (설계 단계)**
- **코딩할 때 (구현 단계)**
- **코드를 읽을 때 (유지 보수 단계)**

위 세 가지 경우 외에 **일상 생활**에도 세 가지 개념을 녹여 도식화(타임라인 다이어그램)할 수 있다. 책에서는 **‘장을 보는 상황'**로 예시를 제시한다. 해당 예시를 함수형 사고로 풀어가며 **액션을 계산과 데이터로 분리하는 과정과 중요성**에 대해 강조한다.

### 3-2. 새로 만드는 코드에 함수형 사고 적용하기

‘쿠폰독’이라는 쿠폰 구독 서비스의 **쿠폰 발행 기능에 함수형 사고를 적용**시키고 실습하는 예제가 있다. 사용자를 더 확보하기 위해 쿠폰독은 친구 10명을 추천하는 사용자에게 더 좋은 쿠폰을 제공하기로 한다. 이런 정책이 있는 쿠폰 발행 기능을 함수형 사고로 작성해보게 된다.

요구 사항을 타임라인에 맞춰 액션, 계산, 데이터로 구분하여 작성하는 식으로 진행된다. 이 때, 위에서 언급했던 액션보단 계산, 계산보단 데이터를 초점에 맞춰 진행한다. 그것을 잘 보여주기 위해 **데이터를 먼저 추출하여 계산과 액션을 도출하는 방식**을 보여준다.

### 3-3. 이미 있는 코드에 함수형 사고 적용하기

다음으로 레거시 코드에 함수형 사고를 적용하는 예제를 살펴본다. 예제 코드를 살펴보면 콜스택의 꽤나 깊은 곳에 액션 함수가 존재하고, 이로 인해 프로그램 전체가 액션이 되어 버리는 **액션 전파**를 보여줍니다. 여기서 함수형 사고를 적용하지 않은 프로그램은 보통 전체 프로그램이 액션이 된다고 주장합니다.

특히 **자바스크립트 생태계에서는 쉽게 액션을 사용**하게 된다. `alert, console.log, 날짜 생성자, 변수/속성/배열 참조, 값 할당, 속성 삭제` 등 시점과 횟수에 의존적인 액션이 만연하기 때문이다.

### 질문과 프리토킹

1. 실제 이메일 푸시 처리를 어떻게들 하고있나 궁금하네요.
   각자 비슷한 사례들이 있고 처리한 데이터를 DB에 올려놓는 방식으로 메모리를 절약한다.
   이와 관련된 기능을 건드리다가 장애를 냈다..
2. 액션 그리고 프론트엔드 테스트
   프론트엔드 생태계, 즉 JS나 웹 환경에서는 저자가 제시했듯이 브라우저와 쌍방 영향을 미치기에 많은 동작이 액션이다. 이로 인해 테스트가 어렵다는 인식이 만연한 상태이다. 허나 프론트엔드나 백엔드에서도 계산은 테스트가 쉽게 이뤄진다.
