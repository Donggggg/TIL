# 브라우저 원리

## 브라우저의 특징

- 사용자가 **선택한 자원**을 **서버에 요청**하고 **브라우저에 그려준다.**
- 자원은 보통 **HTML, XML, PDF, 이미지** 등 이다.
- 자원의 주소는 `URI(Unified Resource Idenfier)`이다.
- HTML, CSS, JS, 엔진 등과 같은 기술이 서로 유기적으로 엮여 기능을 하는 것 같다.

## 브라우저의 기본 구조

![](https://i.imgur.com/oGxP9j3.png)

1. **사용자 인터페이스**
   **주소 표시줄, 이전/다음 버튼, 북마크 메뉴** 등과 같이 요청한 페이지를 보여주는 부분을 제외한 나머지 부분이다.
2. **브라우저 엔진**
   사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어한다.
3. **렌더링 엔진**
   **요청한 컨텐츠를 표시**한다.
   HTML을 요청하면 **HTML과 CSS를 파싱**해서 표시한다.
4. **통신**
   HTTP 통신 요청과 같은 **네트워크 호출**에 사용된다.
   플랫폼 독립적이고 각 플랫폼 하부에서 실행된다.
5. **자바스크립트 해석기**
   자바스크립트 코드를 **해석하고 실행**한다.
6. **UI 백엔드**
   콤보 박스와 창 같은 기본적인 UI를 그린다.
   플랫폼에서 명시하지 않은 인터페이스로 OS 사용자 인터페이스 체계를 사용한다.
7. **자료 저장소**
   자료를 저장하는 계층이다.
   쿠키를 저장하는 것과 같이 모든 자료를 디스크에 저장할 필요가 있다.

## 렌더링 엔진

- 요청 받은 내용을 브라우저에 표시하는 역할을 한다.
- Firefox는 **Gaeko**를 사용하고 Chrome, Safari는 **Webkit**을 사용한다.

### 동작 과정

![](https://i.imgur.com/GlAhDnN.png)

- 렌더링 엔진은 통신으로부터 요청한 문서의 내용을 읽는 것으로 시작하는데 문서의 내용은 보통 8KB 단위로 전송된다.
- 렌더링 엔진은 HTML 문서를 파싱하고 "컨텐츠 트리" 내부에서 태그를 DOM 노드로 변환한다. `DOM 트리`
- 그 다음, 외부 CSS 파일과 함께 포함된 스타일 요소도 파싱한다. `CSSOM 트리`
- 스타일 정보와 HTML 규칙은 "렌더 트리"라는 트리로 저장한다.
- 렌더 트리 생성이 끝나면 배치가 시작된다.
- 이후 UI 백엔드에서 그리기 시작한다.

![](https://i.imgur.com/pwQR8Cw.png)

- 해당 그림은 Webkit 엔진이 처리하는 과정의 도식이다.

### 레퍼런스 & 이미지 출처

https://d2.naver.com/helloworld/59361
