# Reflow와 Repaint

- 렌더링 과정은 **DOM트리, CSSOM트리, 렌더 트리**가 만들어지고 **Layout(배치), Paint(그리기)** 과정을 진행하게 된다.

### Layout

- 렌더 트리의 노드들이 가지고 있는 속성과 스타일에 따라 **브라우저의 화면에 어느 위치와 크기로 출력되는지 계산**하는 단계이다.
- `%, vh, vw`와 같은 상대적인 위치와 크기를 `뷰포트(Viewport)` 기준으로 `px` 값으로 변환한다.

### Paint

- Layout 계산이 완료되면 **실제 화면에 그리기** 시작한다.
- 계산된 값들을 실제 픽셀에 채워넣는다.
- 텍스트, 색, 이미지, 그림자가 처리된다.
- 처리해야할 스타일이 복잡할수록 오래 걸린다.

### Reflow

- 스크립트의 이벤트나 로직에 의해 HTML 요소의 크기나 위치가 수정되면 영향을 받는 자식 노드나 부모 노드들을 포함하여 Layout 과정을 다시 진행한다.
- 렌더 트리의 각 요소들의 크기와 위치를 다시 계산하게 되는데 이것이 Reflow이다.
- 초기 렌더링, 창 리사이즈, 노드 추가 및 제거, 요소의 위치 및 크기 변경, 폰트, 텍스트, 이미지 변경 등과 같은 경우에 발생한다.

### Repaint

- Reflow가 일어나면 다시 그려주는 과정도 필요하고 그것이 Repaint이다.
- Reflow 상황 외에도 스타일 속성 중 Reflow가 필요하지 않는 값 (visibility, background-color)가 변경될 때에 발생한다.

### Reflow와 Repaint를 고려해 최적화하기

- 사용하지 않는 노드에는 visibility: false 보다 display:none 사용하기
- Reflow 발생하는 속성 사용 피하기
- 영향을 주는 노드 줄이기
- 프레임 줄이기

### 레퍼런스

https://boxfoxs.tistory.com/408
