# 가비지 컬렉션

### 정의

- 자바스크립트는 도달 가능성(reachability)라는 개념을 사용해 메모리를 관리한다.
- 쉽게 말해서 접근할 수 있는지에 대한 정의이다.
- 도달할 수 있는 값들을 root라고 정의한다.

### 가비지 컬렉터

- `mark-and-sweep`이라는 알고리즘으로 동작한다.

  > 1. root를 모두 mark한다.
  > 2. root가 참조하고 있는 모든 객체도 mark한다.
  > 3. mark된 모든 객체도 방문하여 그 객체가 참조하는 객체도 mark한다.
  > 4. mark되지 않은 객체를 메모리에서 삭제한다.

- 또, 실행에 영향을 최소화하기 위한 다양한 최적화 기법을 사용한다.
  > 1. generaional collection (세대별 수집)
  >    객체를 '오래된 객체'와 '새로운 객체'로 나눈다.
  >    '새로운 객체'에 대한 정리는 공격적으로 진행한다.
  >    일정 시간 이상 살아남은 객체는 '오래된 객체'로 분류하고 삭제 우선순위를 미룬다.
  >
  > 2. incremental collection (점진적 수집)
  >    많은 객체를 방문하며 mark하는 것은 비효율적이다.
  >    가비지 컬렉션을 chunk로 나누어 짧은 시간으로 여러번 실행한다.
  >    작업을 분리하고, 변경 사항을 추적하는 데 추가 작업이 필요하다.
  >
  > 3. idle-time collection (유휴 시간 수집)
  >    실행에 주는 영향을 최소화하기 위해 CPU가 유휴 상태일 때만 가지비 컬렉션을 실행한다.

### V8 엔진의 카비지 컬렉션
